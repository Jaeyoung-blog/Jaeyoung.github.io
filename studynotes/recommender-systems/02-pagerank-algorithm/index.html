<!DOCTYPE html>
<html lang="ko">
<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="utf-8">
    
    <title>02. PageRank Algorithm | Jaeyoung&#39;s Blog</title>
    
    
        <meta name="keywords" content="StudyNotes,RecommenderSystems">
    
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="description" content="PageRank AlgorithmPageRank 알고리즘은 구글이 개발하고 사용중인 구글 검색엔진 알고리즘이다. 사용자가 검색어를 입력하면, 그 검색어에 해당하는 글들을 추천해서 띄워주는 추천 시스템이라고도 볼 수 있다. 본 문서에서는 PageRank 알고리즘에 대해서 정리보해보고자 한다. Introduction PageRank 알고리즘을 간단하게 요약하면">
<meta name="keywords" content="StudyNotes,RecommenderSystems">
<meta property="og:type" content="article">
<meta property="og:title" content="02. PageRank Algorithm">
<meta property="og:url" content="https://wayexists02.github.io/studynotes/recommender-systems/02-pagerank-algorithm/index.html">
<meta property="og:site_name" content="Jaeyoung&#39;s Blog">
<meta property="og:description" content="PageRank AlgorithmPageRank 알고리즘은 구글이 개발하고 사용중인 구글 검색엔진 알고리즘이다. 사용자가 검색어를 입력하면, 그 검색어에 해당하는 글들을 추천해서 띄워주는 추천 시스템이라고도 볼 수 있다. 본 문서에서는 PageRank 알고리즘에 대해서 정리보해보고자 한다. Introduction PageRank 알고리즘을 간단하게 요약하면">
<meta property="og:locale" content="ko">
<meta property="og:updated_time" content="2020-09-20T12:51:07.211Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="02. PageRank Algorithm">
<meta name="twitter:description" content="PageRank AlgorithmPageRank 알고리즘은 구글이 개발하고 사용중인 구글 검색엔진 알고리즘이다. 사용자가 검색어를 입력하면, 그 검색어에 해당하는 글들을 추천해서 띄워주는 추천 시스템이라고도 볼 수 있다. 본 문서에서는 PageRank 알고리즘에 대해서 정리보해보고자 한다. Introduction PageRank 알고리즘을 간단하게 요약하면">
    

    
        <link rel="alternate" href="/atom.xml" title="Jaeyoung&#39;s Blog" type="application/atom+xml">
    

    
        <link rel="icon" href="/favicon.ico">
    

    <link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/libs/open-sans/styles.css">
    <link rel="stylesheet" href="/libs/source-code-pro/styles.css">

    <link rel="stylesheet" href="/css/style.css">
    <script src="/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="/libs/jquery/plugins/cookie/1.4.1/jquery.cookie.js"></script>
    
    
        <link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">
    
    
        <link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css">
    
    
    
    


    
        <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    
</head>
</html>
<body>
    <div id="container">
        <header id="header">
    <div id="header-main" class="header-inner">
        <div class="outer">
            <a href="/" id="logo">
                <i class="logo"></i>
                <span class="site-title">Jaeyoung&#39;s Blog</span>
            </a>
            <nav id="main-nav">
                
                    <a class="main-nav-link" href="/">Main</a>
                
                    <a class="main-nav-link" href="/archives">TimeLine</a>
                
                    <a class="main-nav-link" href="/categories">Category</a>
                
                    <a class="main-nav-link" href="/tags">Tag</a>
                
                    <a class="main-nav-link" href="/about">About</a>
                
            </nav>
            
            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="검색" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '포스트',
            PAGES: 'Pages',
            CATEGORIES: '카테고리',
            TAGS: '태그',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
        </div>
    </div>
    <div id="main-nav-mobile" class="header-sub header-inner">
        <table class="menu outer">
            <tr>
                
                    <td><a class="main-nav-link" href="/">Main</a></td>
                
                    <td><a class="main-nav-link" href="/archives">TimeLine</a></td>
                
                    <td><a class="main-nav-link" href="/categories">Category</a></td>
                
                    <td><a class="main-nav-link" href="/tags">Tag</a></td>
                
                    <td><a class="main-nav-link" href="/about">About</a></td>
                
                <td>
                    
    <div class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="검색" />
    </div>

                </td>
            </tr>
        </table>
    </div>
</header>

        <div class="outer">
            
            
                <aside id="sidebar">
   
        
    <div class="widget-wrap" id='categories'>
        <h3 class="widget-title">
            <span>카테고리</span>
            &nbsp;
            <a id='allExpand' href="#">
                <i class="fa fa-angle-double-down fa-2x"></i>
            </a>
        </h3>
        
        
        
         <ul class="unstyled" id="tree" > 
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            Home
                        </a>
                         <ul class="unstyled" id="tree" >  <li class="file"><a href="/index/">Home</a></li>  <li class="file"><a href="/Blog-Init/">Init Blog</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory open">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder-open"></i>
                            &nbsp;
                            Study Notes
                        </a>
                         <ul class="unstyled" id="tree" > 
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            Bayesian Statistics
                        </a>
                         <ul class="unstyled" id="tree" >  <li class="file"><a href="/studynotes/bayesian-statistics/01_Probability/">01. Probability</a></li>  <li class="file"><a href="/studynotes/bayesian-statistics/02_Distribution/">02. Distribution</a></li>  <li class="file"><a href="/studynotes/bayesian-statistics/03-Frequentist-Inference/">03. Frequentist Inference</a></li>  <li class="file"><a href="/studynotes/bayesian-statistics/04-Bayesian-Inference/">04. Bayesian Inference</a></li>  <li class="file"><a href="/studynotes/bayesian-statistics/05-Credible-Intervals/">05. Credible Intervals</a></li>  <li class="file"><a href="/studynotes/bayesian-statistics/06_Prior_Posterior_predictive/">06. Prior Predictive Distribution</a></li>  <li class="file"><a href="/studynotes/bayesian-statistics/07_Priors/">07. Priors</a></li>  <li class="file"><a href="/studynotes/bayesian-statistics/08_Bayesian_Modeling/">08. Bayesian Modeling</a></li>  <li class="file"><a href="/studynotes/bayesian-statistics/09_Monte_Carlo_Estimation/">09. Monte Carlo Estimation</a></li>  <li class="file"><a href="/studynotes/bayesian-statistics/10_Markov_chain_Monte_Carlo/">10. Markov Chain Monte Carlo</a></li>  <li class="file"><a href="/studynotes/bayesian-statistics/11_Linear_Regression/">11. Linear Regression</a></li>  <li class="file"><a href="/studynotes/bayesian-statistics/12_Prior_Sensitivity_Analysis/">12. Prior Sensitivity Analysis</a></li>  <li class="file"><a href="/studynotes/bayesian-statistics/13_Hierarchical_models/">13. Hierarchical Models</a></li>  <li class="file"><a href="/studynotes/bayesian-statistics/14_Predictive_Simulation/">14. Predictive Simulations</a></li>  <li class="file"><a href="/studynotes/bayesian-statistics/15-definition-of-mixture-models/">15. Definition of Mixture Models</a></li>  <li class="file"><a href="/studynotes/bayesian-statistics/16-Likelihood-for-Mixture-Models/">16. Lieklihood for Mixture Models</a></li>  <li class="file"><a href="/studynotes/bayesian-statistics/APPENDIX-1-MAP/">Appendix 1. Maximize a Posterior</a></li>  <li class="file"><a href="/studynotes/bayesian-statistics/APPENDIX-2-Empirical-Bayes/">Appendix 2. Empirical Bayes</a></li>  <li class="file"><a href="/studynotes/bayesian-statistics/APPENDIX-3-Variational-Inference/">Appendix 3. Variational Inference</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            Machine Learning
                        </a>
                         <ul class="unstyled" id="tree" >  <li class="file"><a href="/studynotes/machine-learning/Distillation-Methods/">Distillation Methods</a></li>  <li class="file"><a href="/studynotes/machine-learning/Hidden-Markov-Models-1/">Hidden Markov Models 1</a></li>  <li class="file"><a href="/studynotes/machine-learning/Hidden-Markov-Models-2/">Hidden Markov Models 2</a></li>  <li class="file"><a href="/studynotes/machine-learning/KL-Divergence/">KL Divergence</a></li>  <li class="file"><a href="/studynotes/machine-learning/Lagrangian-Multiplier/">Lagrangian Multiplication</a></li>  <li class="file"><a href="/studynotes/machine-learning/Machine-Learning/">Machine Learning</a></li>  <li class="file"><a href="/studynotes/machine-learning/Principal-Component-Analysis/">Principal Component Analysis</a></li>  <li class="file"><a href="/studynotes/machine-learning/Restrict-Boltzmann-Machines-1st/">Restrict Boltzmann Machines 1</a></li>  <li class="file"><a href="/studynotes/machine-learning/Restrict-Boltzmann-Machines-2nd/">Restrict Boltzmann Machines 2</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory open">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder-open"></i>
                            &nbsp;
                            Recommender Systems
                        </a>
                         <ul class="unstyled" id="tree" >  <li class="file active"><a href="/studynotes/recommender-systems/02-pagerank-algorithm/">02. PageRank Algorithm</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            Reinforcement Learning
                        </a>
                         <ul class="unstyled" id="tree" >  <li class="file"><a href="/studynotes/reinforcement-learning/01_Introduction/">01. Introduction</a></li>  <li class="file"><a href="/studynotes/reinforcement-learning/02-K-arm-Bandits-Problems/">02. K-arm Bandits Problems</a></li>  <li class="file"><a href="/studynotes/reinforcement-learning/03-Markov-Decision-Process/">03. Markov Decision Process</a></li>  <li class="file"><a href="/studynotes/reinforcement-learning/04-Policies-and-Value-Functions/">04. Policies and Value Functions</a></li>  <li class="file"><a href="/studynotes/reinforcement-learning/05-Policy-Evaluation-vs-Control/">05. Policy Evaluation & Control</a></li>  <li class="file"><a href="/studynotes/reinforcement-learning/06-Sample-based-Reinforcement-Learning/">06. Sample-based Reinforcement Learning</a></li>  <li class="file"><a href="/studynotes/reinforcement-learning/07-Off-Policy-Learning/">07. Off-policy Learning</a></li>  <li class="file"><a href="/studynotes/reinforcement-learning/08-Temporal-Difference-Learning/">08. Temporal Difference Learning</a></li>  <li class="file"><a href="/studynotes/reinforcement-learning/09-Models-and-Planning/">09. Models and Planning</a></li>  <li class="file"><a href="/studynotes/reinforcement-learning/10-Prediction-and-Control-with-Function-Approximation/">10. Prediction and Control with Function Approximation</a></li>  <li class="file"><a href="/studynotes/reinforcement-learning/11-Feature-Construction/">11. Feature Construction</a></li>  <li class="file"><a href="/studynotes/reinforcement-learning/12-Controls-with-Approximation/">12. Controls with Approximation</a></li>  <li class="file"><a href="/studynotes/reinforcement-learning/13-Policy-Gradient/">13. Policy Gradient</a></li>  <li class="file"><a href="/studynotes/reinforcement-learning/Appendix-1-RL-Cheatsheet/">Appendix 01. Which Algorithm Should be selected</a></li>  </ul> 
                    </li> 
                     </ul> 
                    </li> 
                     </ul> 
    </div>
    <script>
        $(document).ready(function() {
            var iconFolderOpenClass  = 'fa-folder-open';
            var iconFolderCloseClass = 'fa-folder';
            var iconAllExpandClass = 'fa-angle-double-down';
            var iconAllPackClass = 'fa-angle-double-up';
            // Handle directory-tree expansion:
            // 左键单独展开目录
            $(document).on('click', '#categories a[data-role="directory"]', function (event) {
                event.preventDefault();

                var icon = $(this).children('.fa');
                var expanded = icon.hasClass(iconFolderOpenClass);
                var subtree = $(this).siblings('ul');
                icon.removeClass(iconFolderOpenClass).removeClass(iconFolderCloseClass);
                if (expanded) {
                    if (typeof subtree != 'undefined') {
                        subtree.slideUp({ duration: 100 });
                    }
                    icon.addClass(iconFolderCloseClass);
                } else {
                    if (typeof subtree != 'undefined') {
                        subtree.slideDown({ duration: 100 });
                    }
                    icon.addClass(iconFolderOpenClass);
                }
            });
            // 右键展开下属所有目录
            $('#categories a[data-role="directory"]').bind("contextmenu", function(event){
                event.preventDefault();
                
                var icon = $(this).children('.fa');
                var expanded = icon.hasClass(iconFolderOpenClass);
                var listNode = $(this).siblings('ul');
                var subtrees = $.merge(listNode.find('li ul'), listNode);
                var icons = $.merge(listNode.find('.fa'), icon);
                icons.removeClass(iconFolderOpenClass).removeClass(iconFolderCloseClass);
                if(expanded) {
                    subtrees.slideUp({ duration: 100 });
                    icons.addClass(iconFolderCloseClass);
                } else {
                    subtrees.slideDown({ duration: 100 });
                    icons.addClass(iconFolderOpenClass);
                }
            })
            // 展开关闭所有目录按钮
            $(document).on('click', '#allExpand', function (event) {
                event.preventDefault();
                
                var icon = $(this).children('.fa');
                var expanded = icon.hasClass(iconAllExpandClass);
                icon.removeClass(iconAllExpandClass).removeClass(iconAllPackClass);
                if(expanded) {
                    $('#sidebar .fa.fa-folder').removeClass('fa-folder').addClass('fa-folder-open')
                    $('#categories li ul').slideDown({ duration: 100 });
                    icon.addClass(iconAllPackClass);
                } else {
                    $('#sidebar .fa.fa-folder-open').removeClass('fa-folder-open').addClass('fa-folder')
                    $('#categories li ul').slideUp({ duration: 100 });
                    icon.addClass(iconAllExpandClass);
                }
            });  
        });
    </script>

    
    <div id="toTop" class="fa fa-angle-up"></div>
</aside>
            
            <section id="main"><article id="post-studynotes/recommender-systems/02-pagerank-algorithm" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
                    <div class="article-meta">
                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/Study-Notes/">Study Notes</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/Study-Notes/Recommender-Systems/">Recommender Systems</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/RecommenderSystems/">RecommenderSystems</a>, <a class="tag-link" href="/tags/StudyNotes/">StudyNotes</a>
    </div>

                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/studynotes/recommender-systems/02-pagerank-algorithm/">
            <time datetime="2020-09-20T12:39:05.000Z" itemprop="datePublished">2020-09-20</time>
        </a>
    </div>


                        
                            <i class="fa fa-bar-chart"></i>
                            <span id="busuanzi_container_site_pv"><span id="busuanzi_value_page_pv"></span></span>    
                        
                        
                            <div class="article-meta-button">
                                <a href='https://github.com/wayexists02/wayexists02.github.io/raw/writing/source/_posts/studynotes/recommender-systems/02-pagerank-algorithm.md'> Source </a>
                            </div>
                            <div class="article-meta-button">
                                <a href='https://github.com/wayexists02/wayexists02.github.io/edit/writing/source/_posts/studynotes/recommender-systems/02-pagerank-algorithm.md'> Edit </a>
                            </div>
                            <div class="article-meta-button">
                                <a href='https://github.com/wayexists02/wayexists02.github.io/commits/writing/source/_posts/studynotes/recommender-systems/02-pagerank-algorithm.md'> History </a>
                            </div>
                        
                    </div>
                
                
    
        <h1 class="article-title" itemprop="name">
            02. PageRank Algorithm
        </h1>
    

            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
        
            
                <div id="toc" class="toc-article">
                <strong class="toc-title">카탈로그</strong>
                    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#PageRank-Algorithm"><span class="toc-number">1.</span> <span class="toc-text">PageRank Algorithm</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Introduction"><span class="toc-number">2.</span> <span class="toc-text">Introduction</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Preliminaries"><span class="toc-number">3.</span> <span class="toc-text">Preliminaries</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Markov-Chain"><span class="toc-number">3.1.</span> <span class="toc-text">Markov Chain</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Transition-Matrix-of-Markov-Chain"><span class="toc-number">3.1.1.</span> <span class="toc-text">Transition Matrix of Markov Chain</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Limiting-Distribution-vs-Stationary-Distribution"><span class="toc-number">3.1.2.</span> <span class="toc-text">Limiting Distribution (vs Stationary Distribution)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Perron-Frobenius-Theorem"><span class="toc-number">3.1.3.</span> <span class="toc-text">Perron-Frobenius Theorem</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Transition-Matrix-Smoothing"><span class="toc-number">3.1.4.</span> <span class="toc-text">Transition Matrix Smoothing</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#PageRank-Computation"><span class="toc-number">3.2.</span> <span class="toc-text">PageRank Computation</span></a></li></ol></li></ol>
                </div>
            
        
        
            <h1 id="PageRank-Algorithm"><a href="#PageRank-Algorithm" class="headerlink" title="PageRank Algorithm"></a>PageRank Algorithm</h1><p>PageRank 알고리즘은 구글이 개발하고 사용중인 구글 검색엔진 알고리즘이다. 사용자가 검색어를 입력하면, 그 검색어에 해당하는 글들을 추천해서 띄워주는 추천 시스템이라고도 볼 수 있다. 본 문서에서는 PageRank 알고리즘에 대해서 정리보해보고자 한다.</p>
<h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><hr>
<p>PageRank 알고리즘을 간단하게 요약하면, 각 웹페이지마다 랭크를 매긴 후, 검색어에 따라, 높은 랭킹의 웹 페이지를 상단에 위치시키기 위한 알고리즘이다. 즉, 페이지마다 랭크를 매기는 기술이다.</p>
<p>구글은 각 웹 페이지의 랭킹을 매기기 위해, 페이지간의 링크를 활용한다. 어떤 특정 웹 페이지로 가는 외부링크(유입경로)가 많다면, 그 웹 페이지의 랭크는 상승하도록 한다. 반면, 유입될 경로가 적은 웹 페이지의 경우, 그 랭크가 낮다.</p>
<p>PageRank 알고리즘을 이해하기 위해서는 먼저 Markov chain을 이해해야 한다. 구글은 페이지 유입 경로인 링크를 통한 페이지 이동을 Markov chain으로 모델링하고, 해당 Markov chain으로 PageRank를 계산한다.</p>
<h1 id="Preliminaries"><a href="#Preliminaries" class="headerlink" title="Preliminaries"></a>Preliminaries</h1><hr>
<p>본 파트에서는 PageRank 알고리즘을 이해하기 위해 필요한 선행지식에 대해 최소한으로 논의해보고자 한다.</p>
<p>PageRank를 이해하는데 다음의 개념을 아는 것이 필요하다.</p>
<ul>
<li>Markov chain<ul>
<li>Transition matrix</li>
<li>Transition matrix smoothing</li>
<li>Limiting distribution vs stationary distribution</li>
<li>(Perron-Frobenius Theorem)</li>
</ul>
</li>
</ul>
<h2 id="Markov-Chain"><a href="#Markov-Chain" class="headerlink" title="Markov Chain"></a>Markov Chain</h2><hr>
<p>구글은 페이지간 링크 이동을 Markov chain으로 모델링해 놓았다.</p>
<ul>
<li>페이지 $i$에서 $n$개의 페이지로 가는 링크가 있다고 하자. 그럼, 그 $n$개의 페이지로 갈 확률은 각각 $1/n$이다.</li>
<li>페이지 $i$에서 링크를 통해 페이지 $j$로 가는 확률 $p(i \rightarrow j)$은 오직 페이지 $i$에 있을떄의 상태로부터만 영향을 받는다. 사용자가 페이지 $i$로 어떤 경로를 통해 들어왔건, $p(i \rightarrow j)$에는 영향을 끼치지 않는다. 즉, 웹페이지 이동 모델은 Markov assumption을 따른다.</li>
</ul>
<p>예를들어, $i$라는 페이지가 있다고 가정했을 때, 이 페이지에는 다른 외부페이지 $j, k, l$로 가는 링크가 존재한다고 하자. 그럼, 페이지 $i$에서 각 페이지로 이동할 확률은 각각 $1/3$이 된다.</p>
<script type="math/tex; mode=display">p(i \rightarrow j) = p(i \rightarrow k) = p(i \rightarrow l) = \frac{1}{3}</script><h3 id="Transition-Matrix-of-Markov-Chain"><a href="#Transition-Matrix-of-Markov-Chain" class="headerlink" title="Transition Matrix of Markov Chain"></a>Transition Matrix of Markov Chain</h3><p>Markov chain에서는 상태를 이동하는 확률을 저장한 transition matrix를 정의할 수 있다.</p>
<p>웹 페이지가 $i, j, k$ 3개밖에 없다고 가정해보자. 그리고, $i$ 페이지에는 $j$로 가는 링크가 있고, $j$ 페이지에는 $i, k$로 가는 링크가 있고, $k$페이지에는 다른 외부로가는 링크가 없다고 해 보자. 그럼, 세 개의 웹 페이지 $i, j, k$에 대해 transition matrix $A$는 다음처럼 정의할 수 있다.</p>
<script type="math/tex; mode=display">A = \begin{pmatrix}
0 & 1 & 0 \\
\frac{1}{2} & 0 & \frac{1}{2} \\
0 & 0 & 0
\end{pmatrix}</script><p>첫 번째 행은 페이지 $i$에서 각각 $i, j, k$로 이동할 확률을 의미하며,</p>
<p>두 번째 행은 페이지 $j$에서 각각 $i, j, k$로 이동할 확률,</p>
<p>세 번째 행은 페이지 $k$에서 각각 $i, j, k$로 이동할 확률을 의마한다.</p>
<p>하지만, 알다시피, 구글을 통해 접근할 수 있는 웹 페이지는 한 두개가 아니다. 우리가 상상할 수 없을 정도의 개수만큼 웹 페이지가 존재하는데, 웹 페이지가 100만개 있다고 가정해보자. 그리고, 어느 한 페이지 $i$에 들어가본다고 가정해보자. 이때, 페이지 $i$에는 과연 100만개의 웹 페이지중에서 몇 개나 링크를 가지고 있을지 상상해 볼 수 있을 것이다. 당연히 대부분의 웹 페이지에 대한 링크는 가지고 있지 않고 매우 극소수의 페이지로 가는 링크만이 존재한다. 이것은 페이지 $i$ 뿐 아니라, 100만개의 모든 웹 페이지에게 성립한다.</p>
<p>즉, transition matrix의 관점으로 보면, 대부분의 원소가 0이 된다.</p>
<h3 id="Limiting-Distribution-vs-Stationary-Distribution"><a href="#Limiting-Distribution-vs-Stationary-Distribution" class="headerlink" title="Limiting Distribution (vs Stationary Distribution)"></a>Limiting Distribution (vs Stationary Distribution)</h3><p>그럼, 이 transition matrix로 페이지의 랭크를 어떻게 계산할까. 바로 transition matrix의 limiting distribution을 계산하는 것이 PageRank 알고리즘의 핵심이다.</p>
<p>Transition matrix는 각 페이지에서 다른 페이지로 이동할 확률을 정의한 행렬이다. 그러나, 이 행렬은 각 페이지를 비교하는 어떤 수치값을 제공해주지는 못한다. 구글에서 취한 전략은 다음과 같다.</p>
<ol>
<li><p>Initial state distribution $\pi_0$을 정의한다.</p>
<p> Initial state distribution이란, 맨 처음 웹 페이지를 켰을 때, 각 페이지를 방문할 확률을 의미한다. 구글에서 접속할 수 있는 웹 페이지가 3개라면, 구글은 initial state distribution $\pi_0$를 다음과 같이 정의한다.</p>
<script type="math/tex; mode=display">\pi_0 = \begin{pmatrix}
 \frac{1}{3} & \frac{1}{3} & \frac{1}{3}
 \end{pmatrix}</script><p> 즉, 모든 웹 페이지로 시작할 확률이 같도록 정의한다. 이때, $\pi_0$의 각 원소는 각각 $p(s_0 = 1)$, $p(s_0 = 2)$, $p(s_0 = 3)$을 나타낸다. $s_0$는 첫 번째 state(구글에서 처음 들어간 웹 페이지)를 의미하고, $p(s_0 = i)$는 그 첫 웹 페이지가 $i$일 확률을 의마한다.</p>
</li>
<li><p>사용자가 transition matrix $A$를 따라 랜덤으로 페이지의 링크를 따라간다고 가정한다. 이때, $t$번째 탐색에서 사용자가 각 페이지에 있을 확률분포 $\pi_t$를 계산할 수 있다.</p>
<script type="math/tex; mode=display">\pi_t = p(s_t) \\
 = \sum_{i} p(s_t | s_{t-1} = i) \\
 = \pi_{t-1} A</script><p> 위 식이 이해가 잘 안된다면, $t=1$일때를 가정해보자. 첫 웹 페이지에서 첫 번째로 링크를 따라 들어가서 다음 페이지로 간다고 해 보자. 이때, 사용자가 랜덤으로 첫 웹 페이지를 선택하고 랜덤으로 첫 번째 링크를 따라간 뒤, 사용자가 각 웹 페이지에 있을 확률은 각각 다음과 같다.</p>
<script type="math/tex; mode=display">p(s_1=1) = \sum_i p(s_1=1|s_0=i) \\
 p(s_1 = 2) = \sum_i p(s_1 = 2| s_0 = i) \\ 
 p(s_1 = 3) = \sum_i p(s_1 = 3 | s_0 = i)</script><p> 얘네를 잘 관찰해보면, $\pi_1 = p(s_1)$은 다음과 같음을 쉽게 알 수 있다.</p>
<script type="math/tex; mode=display">\pi_1 = p(s_1) = \pi_0 A</script><p> 마찬가지로, 사용자가 첫 번째 링크를 따라온 상태라고 가정했을 때, 두 번째 링크를 따라가서 각 페이지에 있을 확률은 다음과 같다.</p>
<script type="math/tex; mode=display">\pi_2 = \pi_1 A = \pi_0 A^2</script><p> 이를 $t$번까지 확장해보면 다음과 같다.</p>
<script type="math/tex; mode=display">\pi_t = \pi_{t-1} A = \pi_0 A^t</script></li>
<li><p>사용자가 랜덤으로 페이지 링크를 따라가는 과정을 무한번 반복한다고 가정해보자. 이때, 사용자가 각 웹 페이지에 있을 확률에 대한 분포 $\pi_{\infty}$는 다음과 같다.</p>
<script type="math/tex; mode=display">\pi_{\infty} = \pi_{\infty - 1} A</script><p> $\infty - 1$은 그냥 $\infty$와 같다. 따라서, 다음이 성립한다.</p>
<script type="math/tex; mode=display">\pi_{\infty} = \pi_{\infty} A</script><p> 즉, 무한번 링크를 따라가다보면, 사용자가 각 웹 페이지에 있을 확률분포는 더 이상 링크를 따라가봤자 변하지 않는다. 이때 $\pi_{\infty}$를 <strong>limiting distribution</strong>이라고 부른다. <strong>구글이 각 페이지에 랭크를 매기는 방법</strong>은 바로 이 limiting distribution을 계산하는 것이다. 사용자가 임의로 웹 페이지를 링크를 따라 무한히 이동했을 때, 각 페이지에 있을 확률을 페이지의 랭크로 정의한다. 확률이 높다면, 랭크가 높은 것이고, 낮다면 랭크가 낮은 것이다. 이것은 어느정도 합리적인 구상이라고 볼 수 있는데, limiting distribution에서 높은 확률을 가진 페이지는 결국 방문 빈도가 많을 수 밖에 없고, 이 말은 그 페이지로 연결된 링크가 많다는 이야기이며, 인기가 많은 페이지라는 의미이기 때문이다.</p>
</li>
</ol>
<p>선형대수학을 공부하신 분들이라면, limiting distribution의 식이 eigen decompostion과 모양이 같다는 것을 알 수 있을 것이다. 즉, limiting distribution을 계산하려면, eigen decomposition을 수행하면 되지 않을까 하는 생각을 가질 수 있다. 하지만, 불행히도, eigen decomposition을 통해 계산된 eigen vector는 limiting distribution이 맞을 수도 있고, 아닐 수도 있다. Eigen decomposition을 통해 계산된 eigen vector는 분명히 $A$를 더 곱해봤자 변하지 않는 벡터이다. 이 벡터가 확률분포를 만족한다면, 이 벡터를 <strong>stationary distribution</strong>이라고 부른다. Stationary distribution이 limiting distribution과 같다면, PageRank는 간단히 transition matrix를 eigen decomposition하는 것 만드로도 간단히(?) 계산할 수 있다. 물론, transition matrix의 크기가 장난 아니기 때문에 보통 문제가 아닐 수 있지만, Spark와 같은 분산처리 시스템이 있다면 해결될 문제이다.</p>
<p>하지만, 또 다른 문제가 있는데, eigen decomposition으로 얻을 수 있는 eigen value와 eigen vector 쌍은 최대 웹 페이지 개수만큼 존재할 것이라는 점이다($A$가 $n \times n$ 차원이면, $n$개만큼의 eigen vector가 존재할 수도 있다).</p>
<p>하지만, 다음 섹션에서 논의할 Perron-Frobenius Theorem을 사용하면, eigen decomposition을 이용하여 계산된 stationary distribution이 limiting distribution과 같다는 것을 보장받을 수 있다. 또한, 이 이론은 모든 원소가 0보다 큰 eigen vector는 오직 1개밖에 존재하지 않음을 보장해준다. 이 말은, 확률분포가 될 자격이 있는 eigen vector가 eigen decomposition으로 얻을 수 있는 eigen vector들 중에 오직 1개밖에 없다는 것이다. 즉, eigen decomposition으로 계산된 그 유일한 eigen vector가 결국 limiting distribution과 같다는 것을 보장받을 수 있다는 의미이며, eigen decompositon 만으로 PageRank를 풀 수 있다는 이야기가 된다.</p>
<h3 id="Perron-Frobenius-Theorem"><a href="#Perron-Frobenius-Theorem" class="headerlink" title="Perron-Frobenius Theorem"></a>Perron-Frobenius Theorem</h3><p>이 이론은 Markov chain의 transition matrix $A$가 다음 조건을 만족했을 때, $A$의 eigen decomposition 결과로 구한 stationary distribution이 limiting distribution과 같다는 것을 보장한다.</p>
<ul>
<li>$A$의 각 row는 적법한 probability distribution이어야 한다. 즉, $A$의 모든 row의 원소를 더했을 때, 모든 값은 1이 되어야 한다.</li>
<li>$A$의 모든 원소는 반드시 0이 아닌 양의 값이어야 한다.</li>
</ul>
<p>이 조건들은 위키백과에 나와있는 Perron-Frobenius Theorem과 조금 차이가 있는데, PageRank에 맞춰서 Perron-Frobenius Theorem을 해석한 위 조건을 사용하기로 한다.</p>
<p>즉, 위 조건들을 만족하면 $A$의 eigen decomposition만으로도 $A$의 limiting distribution을 계산할 수 있다는 의미가 된다. </p>
<p>앞에서 계속 논의하고 있던 Transition matrix $A$의 각 row는 합이 1이 나오도록 모델링을 한 상황이다. 하지만, 한 페이지가 엄청난 숫자의 페이지의 링크를 가지고 있는 경우는 없다고 봐야하므로, $A$의 원소는 0이 대부분이다. 따라서, Perron-Frobenius Theorem을 활용하려면 엄청난 숫자의 0을 다 양수로 만들어야 한다. 구글은 이를 위해서 transition matrix $A$에 smoothing이라는 작업을 하게 된다.</p>
<p>위키백과에 있는 원래의 Perron-Frobenius Theorem에서는 위 두가지 조건을 만족할 때, 모든 원소가 양의 실수인 eigen vector는 오직 1개만 존재한다는 것을 보장하고 있다.</p>
<h3 id="Transition-Matrix-Smoothing"><a href="#Transition-Matrix-Smoothing" class="headerlink" title="Transition Matrix Smoothing"></a>Transition Matrix Smoothing</h3><p>Transition matrix의 대부분이 0이 된다는 사실은 PageRank를 eigen decomposition으로 계산할 수 없게 만든다. 따라서, 구글은 transition matrix $A$를 그대로 사용하지 않고, $A$의 smoothing 버전을 대신 사용하게 된다.</p>
<script type="math/tex; mode=display">\tilde{A} = 0.85 * A + 0.15 * U</script><p>이때, $\tilde{A}$는 smoothing이 적용된 transition matrix이고, $A$는 원래의 transition matrix이다. 그리고, $U$는 다음과 같이 정의한다.</p>
<script type="math/tex; mode=display">U = \begin{pmatrix}
1/n & 1/n & \cdots & 1/n \\ 
1/n & 1/n & \cdots & 1/n \\
\cdots & \cdots & \cdots & \cdots
\end{pmatrix}</script><p>$n$은 웹 페이지의 개수, 즉, $A$의 row 개수(또는 column 개수와도 같다)와 같다. 즉, 모든 페이지에 모든 페이지로 가는 링크 하나씩 박아놓은 transition matrix가 $U$이다.</p>
<p>이 $U$와 $A$를 weighted sum을 한 것이 $\tilde{A}$가 되며, $\tilde{A}$의 모든 원소는 0이 아닌 양수가 된다. 실제로 존재하지 않는 링크의 경우, 0이 아니라 매우 작은 양의 숫자로 만들어주는 것이 smoothing의 핵심이다.</p>
<p>이제, smoothing으로 Perron-Frobenius Theorem의 모든 조건을 만족시켰다. 즉, 구글의 검색 엔진 알고리즘인 PageRank 알고리즘을 transition matrix의 eigen decomposition만으로도 계산할 수 있다.</p>
<h2 id="PageRank-Computation"><a href="#PageRank-Computation" class="headerlink" title="PageRank Computation"></a>PageRank Computation</h2><hr>
<p>PageRank 알고리즘의 계산 과정을 정리하면 다음과 같다.</p>
<ol>
<li>Transition matrix $A$를 정의한다.</li>
<li>Initial state distribution $\pi_0$를 정의한다.</li>
<li>Transition matrix $A$를 smoothing하여 $\tilde{A}$를 계산한다.</li>
<li>$\tilde{A}$에 대해 eigen decomposition을 수행하고, 모든 원소가 양수인 eigen vector를 찾는다.</li>
<li>해당 eigen vector가 바로 각 웹 페이지의 랭크를 표현하는 PageRank이다.</li>
</ol>

            </div>
        
        <footer class="article-footer">
        </footer>
    </div>
</article>


    
<nav id="article-nav">
    
    
        <a href="/studynotes/bayesian-statistics/APPENDIX-3-Variational-Inference/" id="article-nav-older" class="article-nav-link-wrap">
            <strong class="article-nav-caption">이전 글</strong>
            <div class="article-nav-title">Appendix 3. Variational Inference</div>
        </a>
    
</nav>





    
    

    <script src="https://utteranc.es/client.js"
        repo="taeuk-gang/taeuk-gang.github.io"
        issue-term="title"
        label="comment"
        theme="github-light"
        crossorigin="anonymous"
        async>
    </script>



<!-- baidu url auto push script -->
<script type="text/javascript">
    !function(){var e=/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi,r=window.location.href,o=document.referrer;if(!e.test(r)){var n="//api.share.baidu.com/s.gif";o?(n+="?r="+encodeURIComponent(document.referrer),r&&(n+="&l="+r)):r&&(n+="?l="+r);var t=new Image;t.src=n}}(window);
</script>     
</section>
        </div>
        <footer id="footer">
    <div class="outer">
        <div id="footer-info" class="inner">
            Lee Jaeyoung &copy; 2020 
            <a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-nd/4.0/80x15.png" /></a>
            <!-- <br> Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>. Theme - <a href="https://github.com/zthxxx/hexo-theme-Wikitten">wikitten</a> -->
            
                <br>
                <span id="busuanzi_container_site_pv"><i class="fa fa-eye"></i> <span id="busuanzi_value_site_pv"></span></span>
                &nbsp;|&nbsp;
                <span id="busuanzi_container_site_pv"><i class="fa fa-user"></i> <span id="busuanzi_value_site_uv"></span></span>
            
        </div>
    </div>
</footer>

        

    
        <script src="/libs/lightgallery/js/lightgallery.min.js"></script>
        <script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>
        <script src="/libs/lightgallery/js/lg-pager.min.js"></script>
        <script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>
        <script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>
        <script src="/libs/lightgallery/js/lg-zoom.min.js"></script>
        <script src="/libs/lightgallery/js/lg-hash.min.js"></script>
        <script src="/libs/lightgallery/js/lg-share.min.js"></script>
        <script src="/libs/lightgallery/js/lg-video.min.js"></script>
    
    
        <script src="/libs/justified-gallery/jquery.justifiedGallery.min.js"></script>
    
    
        <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true,
            TeX: {
                equationNumbers: {
                  autoNumber: 'AMS'
                }
            }
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script async src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    



<!-- Custom Scripts -->
<script src="/js/main.js"></script>

    </div>
</body>
</html>